#!/bin/bash

commitMessage="[Backup Script]"
if [ $# -eq 1 ]
then
    commitMessage="[Backup Script] $1"
fi

pushd . > /dev/null
echo "\033[0;35m--------------------------"
echo "\033[0;35mBacking up config files..."
echo "\033[0;35m--------------------------"
cd ~/repos/config
git add :/
git --no-pager diff --cached --name-only | awk '{ printf "Backing up: %s\n", $1 }'
echo ""
git commit -m "$commitMessage"
git push origin master


echo ""
echo "\033[0;35m---------------------"
echo "\033[0;35mBacking up scripts..."
echo "\033[0;35m---------------------"
cd ~/repos/scripts
git add :/
git --no-pager diff --cached --name-only | awk '{ printf "Backing up: %s\n", $1 }'
echo ""
git commit -m "$commitMessage"
git push origin master

echo ""
echo "Backup Complete!"
echo ""
popd > /dev/null
