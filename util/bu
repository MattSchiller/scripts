#!/bin/bash

commitMessage="[Backup Script]"
if [ $# -eq 1 ]
then
    commitMessage="[Backup Script] $1"
fi

pushd . > /dev/null
echo "--------------------------"
echo "Backing up config files..."
echo "--------------------------"
cd ~/repos/config
git add :/
git --no-pager diff --cached --name-only | awk '{ printf "Backing up: %s\n", $1 }'
echo ""
git commit -m "$commitMessage"
git push origin master


echo ""
echo "---------------------"
echo "Backing up scripts..."
echo "---------------------"
cd ~/repos/scripts
git add :/
git --no-pager diff --cached --name-only | awk '{ printf "Backing up: %s\n", $1 }'
echo ""
git commit -m "$commitMessage"
git push origin master

echo ""
echo "Backup Complete!"
echo ""
popd > /dev/null
